From 2a47397b1f28d073e414a4e2fe435b610b9b1c25 Mon Sep 17 00:00:00 2001
From: Ondrej Spacek <ondrej.spacek@nxp.com>
Date: Wed, 21 Apr 2021 07:22:47 +0200
Subject: [PATCH] dts: Add phys to PFE to allow usage of SerDes driver.

commit  4e1fca767de50b3261dae17b853a7f9c55c8131a from
https://source.codeaurora.org/external/autobsps32/linux

Change default fsl,sys-mode to correspond to our default board config.

Upstream-Status: Pending

Issue: ALB-7013
Signed-off-by: Ondrej Spacek <ondrej.spacek@nxp.com>
Signed-off-by: Meng Li <Meng.Li@windriver.com>
Signed-off-by: Zhantao Tang <zhantao.tang@windriver.com>
---
 arch/arm64/boot/dts/freescale/fsl-s32-gen1.dtsi | 4 ++--
 1 file changed, 2 insertions(+), 2 deletions(-)

diff --git a/arch/arm64/boot/dts/freescale/fsl-s32-gen1.dtsi b/arch/arm64/boot/dts/freescale/fsl-s32-gen1.dtsi
index f226cf5d28f8..eeaf2649dcb0 100644
--- a/arch/arm64/boot/dts/freescale/fsl-s32-gen1.dtsi
+++ b/arch/arm64/boot/dts/freescale/fsl-s32-gen1.dtsi
@@ -854,7 +854,7 @@ serdes0: serdes@40480000 {
 		resets = <&reset S32GEN1_SCMI_RST_SERDES0>,
 			 <&reset S32GEN1_SCMI_RST_PCIE0>;
 		reset-names = "serdes", "pcie";
-		fsl,sys-mode = <XPCSX2_MODE>;
+		fsl,sys-mode = <PCIE_GEN3X2_MODE>;
 		reg = <0x0 0x40480000 0x0 0x108>,
 		      <0x0 0x40483008 0x0 0x10>,
 		      <0x0 0x40482000 0x0 0x800>,
@@ -926,7 +926,7 @@ serdes1: serdes@44180000 {
 		resets = <&reset S32GEN1_SCMI_RST_SERDES1>,
 			 <&reset S32GEN1_SCMI_RST_PCIE1>;
 		reset-names = "serdes", "pcie";
-		fsl,sys-mode = <PCIE_XPCS0_MODE>;
+		fsl,sys-mode = <XPCSX2_MODE>;
 		reg = <0x0 0x44180000 0x0 0x108>,
 		      <0x0 0x44183008 0x0 0x10>,
 		      <0x0 0x44182000 0x0 0x800>,
-- 
2.25.1

