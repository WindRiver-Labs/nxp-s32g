From c1154ff746890a571dc5a5d332737b74b014d59f Mon Sep 17 00:00:00 2001
From: Dan Nica <dan.nica@nxp.com>
Date: Tue, 14 Jul 2020 09:11:49 +0300
Subject: [PATCH 164/269] psci: Add PSCI_MIGRATE_INFO_TYPE stub

Issue: ALB-5118
Upstream-Status: Pending 

Signed-off-by: Dan Nica <dan.nica@nxp.com>
Signed-off-by: Zhantao Tang <zhantao.tang@windriver.com>
---
 plat/nxp/s32g/s32g_psci.c | 11 +++++++++++
 1 file changed, 11 insertions(+)

diff --git a/plat/nxp/s32g/s32g_psci.c b/plat/nxp/s32g/s32g_psci.c
index e7b1532f8..31cab6317 100644
--- a/plat/nxp/s32g/s32g_psci.c
+++ b/plat/nxp/s32g/s32g_psci.c
@@ -279,6 +279,16 @@ static void __dead2 s32g_system_off(void)
 	plat_panic_handler();
 }
 
+static int32_t s32g_migrate_info(u_register_t *resident_cpu)
+{
+	return PSCI_TOS_NOT_PRESENT_MP;
+}
+
+const spd_pm_ops_t s32g_svc_pm = {
+	.svc_migrate = NULL,
+	.svc_migrate_info = s32g_migrate_info,
+};
+
 const plat_psci_ops_t s32g_psci_pm_ops = {
 	/* cap: PSCI_CPU_OFF */
 	.pwr_domain_off = s32g_pwr_domain_off,
@@ -303,6 +313,7 @@ int plat_setup_psci_ops(uintptr_t sec_entrypoint,
 	s32g_warmboot_entry = sec_entrypoint;
 
 	*psci_ops = &s32g_psci_pm_ops;
+	psci_register_spd_pm_hook(&s32g_svc_pm);
 
 	return 0;
 }
-- 
2.17.1

