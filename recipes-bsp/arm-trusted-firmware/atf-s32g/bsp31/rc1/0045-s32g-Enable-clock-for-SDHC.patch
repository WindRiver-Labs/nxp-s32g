From 29a10765d90c16721487b5e4fa874b4bcd578b25 Mon Sep 17 00:00:00 2001
From: Bogdan Hamciuc <bogdan.hamciuc@nxp.com>
Date: Wed, 18 Dec 2019 12:52:13 +0200
Subject: [PATCH 045/269] s32g: Enable clock for SDHC

Upstream-Status: Pending 

Signed-off-by: Bogdan Hamciuc <bogdan.hamciuc@nxp.com>
Signed-off-by: Zhantao Tang <zhantao.tang@windriver.com>
Issue: ALB-4275
---
 plat/s32g/include/s32g_mc_me.h | 2 ++
 plat/s32g/s32g_clocks.c        | 5 ++++-
 2 files changed, 6 insertions(+), 1 deletion(-)

diff --git a/plat/s32g/include/s32g_mc_me.h b/plat/s32g/include/s32g_mc_me.h
index 533292694..04efa7f74 100644
--- a/plat/s32g/include/s32g_mc_me.h
+++ b/plat/s32g/include/s32g_mc_me.h
@@ -63,7 +63,9 @@
 
 #define S32G_MC_ME_CA53_PART	1
 #define S32G_MC_ME_DDR_0_PART	0
+#define S32G_MC_ME_USDHC_PART	0
 #define S32G_MC_ME_DDR_0_REQ	1
+#define S32G_MC_ME_USDHC_REQ	0
 
 
 /*
diff --git a/plat/s32g/s32g_clocks.c b/plat/s32g/s32g_clocks.c
index 0216dcaa8..ef2886e69 100644
--- a/plat/s32g/s32g_clocks.c
+++ b/plat/s32g/s32g_clocks.c
@@ -288,7 +288,10 @@ void s32g_plat_clock_init(void)
 
 	/* Prepare FXOSC to run on */
 	start_fxosc();
-	/* Enable partition clock for the DDR */
+	/* Enable partition clock for SDHC */
+	mc_me_enable_partition_block(S32G_MC_ME_USDHC_PART,
+				     S32G_MC_ME_USDHC_REQ);
+	/* Enable partition clock for DDR */
 	mc_me_enable_partition_block(S32G_MC_ME_DDR_0_PART,
 				     S32G_MC_ME_DDR_0_REQ);
 
-- 
2.17.1

