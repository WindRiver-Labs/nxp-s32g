From d56fdfc30994ef8b5aea518b546a8cfaadf70659 Mon Sep 17 00:00:00 2001
From: Ghennadi Procopciuc <Ghennadi.Procopciuc@nxp.com>
Date: Wed, 1 Jul 2020 10:43:26 +0300
Subject: [PATCH 133/269] s32g: Remove s32g_ncore_isol_cluster0 duplicate

Issue: ALB-4909
Upstream-Status: Pending 

Signed-off-by: Ghennadi Procopciuc <Ghennadi.Procopciuc@nxp.com>
Signed-off-by: Zhantao Tang <zhantao.tang@windriver.com>
---
 plat/s32g/s32g_lowlevel_bl2.S    | 20 +-------------------
 plat/s32g/s32g_lowlevel_common.S |  1 +
 2 files changed, 2 insertions(+), 19 deletions(-)

diff --git a/plat/s32g/s32g_lowlevel_bl2.S b/plat/s32g/s32g_lowlevel_bl2.S
index ccf2d84bb..1ce35897d 100644
--- a/plat/s32g/s32g_lowlevel_bl2.S
+++ b/plat/s32g/s32g_lowlevel_bl2.S
@@ -12,25 +12,7 @@
 .globl plat_reset_handler
 .globl sram_clr
 .globl plat_secondary_cold_boot_setup
-
-
-/* Set the CAIUTC[IsolEn] bit for the primary A53 cluster.
- * This is so cache invalidate operations from the early TF-A boot code
- * won't cause Ncore to crash.
- *
- * Clobber list: x8,x9,x10
- */
-func s32g_ncore_isol_cluster0
-	movz	x8, #S32G_NCORE_CAIU0_BASE_ADDR_H, lsl #16
-	ldr	x9, [x8, #NCORE_CAIUTC_OFF]
-	movz	x10, #1
-	lsl	x10, x10, #NCORE_CAIUTC_ISOLEN_SHIFT
-	orr	x9, x9, x10
-	str	x9, [x8, #NCORE_CAIUTC_OFF]
-
-	ret
-endfunc s32g_ncore_isol_cluster0
-
+.globl s32g_ncore_isol_cluster0
 
 /* Clobber list: x0,x1,x7,x8,x9,x10,x11 */
 func plat_reset_handler
diff --git a/plat/s32g/s32g_lowlevel_common.S b/plat/s32g/s32g_lowlevel_common.S
index 0e41db751..99045f084 100644
--- a/plat/s32g/s32g_lowlevel_common.S
+++ b/plat/s32g/s32g_lowlevel_common.S
@@ -15,6 +15,7 @@
 .globl plat_panic_handler
 .globl dma_mem_clr
 .globl sram_clr
+.globl s32g_ncore_isol_cluster0
 
 func plat_panic_handler
 	wfi
-- 
2.17.1

