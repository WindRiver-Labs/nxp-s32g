From c1ffde79862c77e2e46a24c598c146a108be82e1 Mon Sep 17 00:00:00 2001
From: Larisa Grigore <larisa.grigore@nxp.com>
Date: Tue, 12 May 2020 17:32:02 +0300
Subject: [PATCH 105/269] s32g: bl3: Register linflex uart

Issue: ALB-4944
Upstream-Status: Pending 

Signed-off-by: Larisa Grigore <larisa.grigore@nxp.com>
Signed-off-by: Zhantao Tang <zhantao.tang@windriver.com>
---
 plat/s32g/s32g275_bl31.c | 5 +++++
 1 file changed, 5 insertions(+)

diff --git a/plat/s32g/s32g275_bl31.c b/plat/s32g/s32g275_bl31.c
index 1e01fc1af..5ebfa0f6f 100644
--- a/plat/s32g/s32g275_bl31.c
+++ b/plat/s32g/s32g275_bl31.c
@@ -176,9 +176,14 @@ void s32g_gic_setup(void)
 
 void bl31_plat_arch_setup(void)
 {
+	static struct console_s32g console;
+
 	s32g_smp_fixup();
 	s32g_el3_mmu_fixup();
 
+	console_s32g_register(S32G_UART_BASE, S32G_UART_CLOCK_HZ,
+			S32G_UART_BAUDRATE, &console);
+
 	/* kick secondary cores out of reset (but will leave them in wfi) */
 	s32g_kick_secondary_ca53_cores();
 }
-- 
2.17.1

