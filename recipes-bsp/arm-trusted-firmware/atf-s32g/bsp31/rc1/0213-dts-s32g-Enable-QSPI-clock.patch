From f01f24271e165f21cb2d7d350d827acfe29969b4 Mon Sep 17 00:00:00 2001
From: Ghennadi Procopciuc <Ghennadi.Procopciuc@nxp.com>
Date: Mon, 1 Feb 2021 14:33:55 +0200
Subject: [PATCH 213/269] dts: s32g: Enable QSPI clock

Issue: ALB-6390
Upstream-Status: Pending 

Signed-off-by: Ghennadi Procopciuc <Ghennadi.Procopciuc@nxp.com>
Signed-off-by: Zhantao Tang <zhantao.tang@windriver.com>
---
 fdts/fsl-s32-gen1.dtsi | 10 ++++++++--
 1 file changed, 8 insertions(+), 2 deletions(-)

diff --git a/fdts/fsl-s32-gen1.dtsi b/fdts/fsl-s32-gen1.dtsi
index 19e73011a..b46672930 100644
--- a/fdts/fsl-s32-gen1.dtsi
+++ b/fdts/fsl-s32-gen1.dtsi
@@ -299,7 +299,8 @@
 				<&clks S32GEN1_CLK_LIN_BAUD>,
 				<&clks S32GEN1_CLK_GMAC0_TS>,
 				<&clks S32GEN1_CLK_SPI>,
-				<&clks S32GEN1_CLK_SDHC>;
+				<&clks S32GEN1_CLK_SDHC>,
+				<&clks S32GEN1_CLK_QSPI_2X>;
 			assigned-clock-parents =
 				<&clks S32GEN1_CLK_ARM_PLL_DFS1>,
 				<&clks S32GEN1_CLK_PERIPH_PLL_PHI1>,
@@ -332,6 +333,10 @@
 				<125000000>,
 				<200000000>,
 				<100000000>,
+				<400000000>,
+				/* If S32G274A Rev < 2, CLK_QSPI_2X maximum
+				 * value can be 266666666.
+				 */
 				<400000000>;
 
 			clocks = <&clks S32GEN1_CLK_XBAR_2X>,
@@ -342,7 +347,8 @@
 				<&clks S32GEN1_CLK_CAN_PE>,
 				<&clks S32GEN1_CLK_LIN_BAUD>,
 				<&clks S32GEN1_CLK_SPI>,
-				<&clks S32GEN1_CLK_SDHC>;
+				<&clks S32GEN1_CLK_SDHC>,
+				<&clks S32GEN1_CLK_QSPI_2X>;
 		};
 
 		mc_cgm1: mc_cgm1@40034000 {
-- 
2.17.1

