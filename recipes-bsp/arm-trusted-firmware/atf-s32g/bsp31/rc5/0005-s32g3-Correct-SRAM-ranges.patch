From 01d0ed14e1145a24ae9da4f6e58a02aedee8d65b Mon Sep 17 00:00:00 2001
From: Ghennadi Procopciuc <ghennadi.procopciuc@nxp.com>
Date: Fri, 29 Oct 2021 07:38:51 +0300
Subject: [PATCH 05/14] s32g3: Correct SRAM ranges

Issue: ALB-8016
Upstream-Status: Pending 

Signed-off-by: Ghennadi Procopciuc <ghennadi.procopciuc@nxp.com>
Signed-off-by: Zhantao Tang <zhantao.tang@windriver.com>
---
 plat/nxp/s32/s32g/s32g3/s32g3_sramc.c | 10 ++++------
 1 file changed, 4 insertions(+), 6 deletions(-)

diff --git a/plat/nxp/s32/s32g/s32g3/s32g3_sramc.c b/plat/nxp/s32/s32g/s32g3/s32g3_sramc.c
index 7634cf91d..23e47f695 100644
--- a/plat/nxp/s32/s32g/s32g3/s32g3_sramc.c
+++ b/plat/nxp/s32/s32g/s32g3/s32g3_sramc.c
@@ -10,13 +10,13 @@
 #define SRAMC3_BASE_ADDR        0x4055E000
 
 #define SRAMC0_MIN_ADDR         (0x0)
-#define SRAMC0_MAX_ADDR         (0x7FFF)
+#define SRAMC0_MAX_ADDR         (0x13fff)
 #define SRAMC1_MIN_ADDR         (SRAMC0_MAX_ADDR + 1)
-#define SRAMC1_MAX_ADDR         (0xFFFF)
+#define SRAMC1_MAX_ADDR         (0x27FFF)
 #define SRAMC2_MIN_ADDR         (SRAMC1_MAX_ADDR + 1)
-#define SRAMC2_MAX_ADDR         (0x17FFF)
+#define SRAMC2_MAX_ADDR         (0x3BFFF)
 #define SRAMC3_MIN_ADDR         (SRAMC2_MAX_ADDR + 1)
-#define SRAMC3_MAX_ADDR         (0x1FFFF)
+#define SRAMC3_MAX_ADDR         (0x4FFFF)
 
 void s32_get_sramc(struct sram_ctrl **ctrls, size_t *size)
 {
@@ -49,8 +49,6 @@ void s32_get_sramc(struct sram_ctrl **ctrls, size_t *size)
 
 uintptr_t a53_to_sramc_addr(uintptr_t addr)
 {
-	addr -= S32G_SRAM_BASE;
-
 	/**
 	 * mem_addr[16:0] = { (bus_addr[24:20] modulo 5),
 	 *                    bus_addr[19:8], bus_addr[5:4]};
-- 
2.17.1

