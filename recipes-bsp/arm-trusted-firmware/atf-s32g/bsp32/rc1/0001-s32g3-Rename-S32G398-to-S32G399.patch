From 7cf5e2eb4bcd25307213201891657819f7231f35 Mon Sep 17 00:00:00 2001
From: Ghennadi Procopciuc <ghennadi.procopciuc@nxp.com>
Date: Mon, 15 Nov 2021 14:14:36 +0200
Subject: [PATCH 01/14] s32g3: Rename S32G398 to S32G399

Issue: ALB-8146
Upstream-Status: Pending 

Signed-off-by: Ghennadi Procopciuc <ghennadi.procopciuc@nxp.com>
Signed-off-by: Zhantao Tang <zhantao.tang@windriver.com>
---
 drivers/nxp/s32g/clk/{s32g398a_clk.c => s32g3_clk.c} | 12 ++++++------
 fdts/{fsl-s32g398a.dtsi => fsl-s32g3.dtsi}           |  2 +-
 fdts/{fsl-s32g398a-rdb.dts => fsl-s32g399a-rdb.dts}  |  4 ++--
 plat/nxp/s32/s32g/s32g3/platform.mk                  |  4 ++--
 4 files changed, 11 insertions(+), 11 deletions(-)
 rename drivers/nxp/s32g/clk/{s32g398a_clk.c => s32g3_clk.c} (95%)
 rename fdts/{fsl-s32g398a.dtsi => fsl-s32g3.dtsi} (98%)
 rename fdts/{fsl-s32g398a-rdb.dts => fsl-s32g399a-rdb.dts} (65%)

diff --git a/drivers/nxp/s32g/clk/s32g398a_clk.c b/drivers/nxp/s32g/clk/s32g3_clk.c
similarity index 95%
rename from drivers/nxp/s32g/clk/s32g398a_clk.c
rename to drivers/nxp/s32g/clk/s32g3_clk.c
index 8ead40118..4710b0ede 100644
--- a/drivers/nxp/s32g/clk/s32g398a_clk.c
+++ b/drivers/nxp/s32g/clk/s32g3_clk.c
@@ -101,14 +101,14 @@ static struct s32gen1_clk gmac0_ref_div_clk =
 static struct s32gen1_clk gmac0_ref_clk =
 		S32GEN1_CHILD_CLK(cgm6_mux3_clk, 0, 50 * MHZ);
 
-static struct s32gen1_clk *s32g398a_clocks[] = {
+static struct s32gen1_clk *s32g3_clocks[] = {
 	[ARR_CLK(S32G_CLK_MC_CGM6_MUX0)] = &cgm6_mux0_clk,
 	[ARR_CLK(S32G_CLK_MC_CGM6_MUX1)] = &cgm6_mux1_clk,
 	[ARR_CLK(S32G_CLK_MC_CGM6_MUX2)] = &cgm6_mux2_clk,
 	[ARR_CLK(S32G_CLK_MC_CGM6_MUX3)] = &cgm6_mux3_clk,
 };
 
-static struct s32gen1_clk *s32g398a_cc_clocks[] = {
+static struct s32gen1_clk *s32g3_cc_clocks[] = {
 	[CC_ARR_CLK(S32GEN1_CLK_GMAC0_TX)] = &gmac_tx_clk,
 	[CC_ARR_CLK(S32GEN1_CLK_GMAC0_EXT_TS)] = &gmac_ext_ts_clk,
 	[CC_ARR_CLK(S32GEN1_CLK_GMAC0_TS)] = &gmac_ts_clk,
@@ -124,10 +124,10 @@ struct s32gen1_clk *s32g_get_plat_cc_clock(uint32_t id)
 {
 	id = s32gen1_platclk2mux(id);
 
-	if (id >= ARRAY_SIZE(s32g398a_cc_clocks))
+	if (id >= ARRAY_SIZE(s32g3_cc_clocks))
 		return NULL;
 
-	return s32g398a_cc_clocks[id];
+	return s32g3_cc_clocks[id];
 }
 
 struct s32gen1_clk *s32g_get_plat_clock(uint32_t id)
@@ -137,10 +137,10 @@ struct s32gen1_clk *s32g_get_plat_clock(uint32_t id)
 
 	id -= S32GEN1_PLAT_CLK_ID_BASE;
 
-	if (id >= ARRAY_SIZE(s32g398a_clocks))
+	if (id >= ARRAY_SIZE(s32g3_clocks))
 		return NULL;
 
-	return s32g398a_clocks[id];
+	return s32g3_clocks[id];
 }
 
 int cc_compound_clk_get_pid(uint32_t id, uint32_t *parent_id)
diff --git a/fdts/fsl-s32g398a.dtsi b/fdts/fsl-s32g3.dtsi
similarity index 98%
rename from fdts/fsl-s32g398a.dtsi
rename to fdts/fsl-s32g3.dtsi
index 6f55d6647..de78786ad 100644
--- a/fdts/fsl-s32g398a.dtsi
+++ b/fdts/fsl-s32g3.dtsi
@@ -9,7 +9,7 @@
 #include "fsl-s32g.dtsi"
 / {
 	model = "NXP S32G";
-	compatible = "fsl,s32g398a", "fsl,s32gen1",
+	compatible = "fsl,s32g3", "fsl,s32gen1",
 		     "arm,vexpress,v2p-aarch64", "arm,vexpress";
 };
 
diff --git a/fdts/fsl-s32g398a-rdb.dts b/fdts/fsl-s32g399a-rdb.dts
similarity index 65%
rename from fdts/fsl-s32g398a-rdb.dts
rename to fdts/fsl-s32g399a-rdb.dts
index 7299cbfc3..f0861bad2 100644
--- a/fdts/fsl-s32g398a-rdb.dts
+++ b/fdts/fsl-s32g399a-rdb.dts
@@ -4,9 +4,9 @@
  * SPDX-License-Identifier: BSD-3-Clause
  */
 /dts-v1/;
-#include "fsl-s32g398a.dtsi"
+#include "fsl-s32g3.dtsi"
 #include "fsl-s32g-rdb.dtsi"
 
 / {
-	compatible = "fsl,s32g398ardb";
+	compatible = "fsl,s32g399ardb";
 };
diff --git a/plat/nxp/s32/s32g/s32g3/platform.mk b/plat/nxp/s32/s32g/s32g3/platform.mk
index 23fbebf7e..53a108710 100644
--- a/plat/nxp/s32/s32g/s32g3/platform.mk
+++ b/plat/nxp/s32/s32g/s32g3/platform.mk
@@ -18,9 +18,9 @@ PLAT_BL_COMMON_SOURCES	+= plat/nxp/s32/s32g/s32g3/s32g3_mc_me.c \
 			   plat/nxp/s32/s32g/s32g3/s32g3_mc_rgm.c \
 			   plat/nxp/s32/s32g/s32g3/s32g3_sramc.c \
 			   plat/nxp/s32/s32g/s32g3/s32g3_vr5510.c \
-			   drivers/nxp/s32g/clk/s32g398a_clk.c \
+			   drivers/nxp/s32g/clk/s32g3_clk.c \
 			   lib/cpus/aarch64/cortex_a53.S \
 
 # Device tree
-DTB_FILE_NAME		?= fsl-s32g398a-rdb.dtb
+DTB_FILE_NAME		?= fsl-s32g399a-rdb.dtb
 FDT_SOURCES             := $(addprefix fdts/, $(patsubst %.dtb,%.dts,$(DTB_FILE_NAME)))
-- 
2.17.1

