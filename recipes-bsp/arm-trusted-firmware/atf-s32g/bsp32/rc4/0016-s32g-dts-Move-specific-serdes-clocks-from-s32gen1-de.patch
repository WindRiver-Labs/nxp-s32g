From aed22aa2b3778173aceacd65576b525bf4d7c4fb Mon Sep 17 00:00:00 2001
From: Andra-Teodora Ilie <andra.ilie@nxp.com>
Date: Fri, 19 Nov 2021 12:26:14 +0200
Subject: [PATCH 16/50] s32g: dts: Move specific serdes clocks from s32gen1
 device tree

Issue: ALB-7411
Upstream-Status: Pending 

Signed-off-by: Andra-Teodora Ilie <andra.ilie@nxp.com>
Signed-off-by: Zhantao Tang <zhantao.tang@windriver.com>
---
 fdts/fsl-s32-gen1.dtsi | 18 ++----------------
 fdts/fsl-s32g.dtsi     | 33 +++++++++++++++++++++++++++++++++
 2 files changed, 35 insertions(+), 16 deletions(-)

diff --git a/fdts/fsl-s32-gen1.dtsi b/fdts/fsl-s32-gen1.dtsi
index 2b5cfd220..6efeb236b 100644
--- a/fdts/fsl-s32-gen1.dtsi
+++ b/fdts/fsl-s32-gen1.dtsi
@@ -160,33 +160,19 @@
 			<&clks S32GEN1_CLK_FIRC>,
 			<&clks S32GEN1_CLK_SIRC>,
 			<&clks S32GEN1_CLK_GMAC0_EXT_RX>,
-			<&clks S32G_CLK_SERDES1_LANE0_TX>,
-			<&clks S32G_CLK_SERDES1_LANE0_CDR>,
-			<&clks S32G_CLK_SERDES1_LANE1_TX>,
-			<&clks S32G_CLK_SERDES1_LANE1_CDR>,
 			<&clks S32GEN1_CLK_SERDES0_LANE0_TX>,
 			<&clks S32GEN1_CLK_SERDES0_LANE0_CDR>,
-			<&clks S32G_CLK_SERDES0_LANE1_TX>,
-			<&clks S32G_CLK_SERDES0_LANE1_CDR>,
 			<&clks S32GEN1_CLK_SERDES_REF>;
 		assigned-clock-parents =
 			<&fxosc 0>,
 			<&firc 0>,
 			<&sirc 0>,
 			<&gmac0_ext_rx 0>,
-			<&serdes1_lane0_ext_tx 0>,
-			<&serdes1_lane0_ext_cdr 0>,
-			<&serdes1_lane1_ext_tx 0>,
-			<&serdes1_lane1_ext_cdr 0>,
 			<&serdes0_lane0_ext_tx 0>,
-			<&serdes0_lane0_ext_cdr 0>,
-			<&serdes0_lane1_ext_tx 0>,
-			<&serdes0_lane1_ext_cdr 0>;
+			<&serdes0_lane0_ext_cdr 0>;
 		assigned-clock-rates =
 			<0>, <0>, <0>, <0>,
-			<0>, <0>, <0>, <0>,
-			<0>, <0>, <0>, <0>,
-			<100000000>;
+			<0>, <0>, <100000000>;
 
 		armpll: armpll@4003800 {
 			compatible = "fsl,s32gen1-armpll";
diff --git a/fdts/fsl-s32g.dtsi b/fdts/fsl-s32g.dtsi
index 82376f44c..26dcde20b 100644
--- a/fdts/fsl-s32g.dtsi
+++ b/fdts/fsl-s32g.dtsi
@@ -28,6 +28,39 @@
 		<&clks S32GEN1_CLK_SPI>,
 		<&clks S32GEN1_CLK_QSPI>;
 
+	assigned-clocks =
+		<&clks S32GEN1_CLK_FXOSC>,
+		<&clks S32GEN1_CLK_FIRC>,
+		<&clks S32GEN1_CLK_SIRC>,
+		<&clks S32GEN1_CLK_GMAC0_EXT_RX>,
+		<&clks S32G_CLK_SERDES1_LANE0_TX>,
+		<&clks S32G_CLK_SERDES1_LANE0_CDR>,
+		<&clks S32G_CLK_SERDES1_LANE1_TX>,
+		<&clks S32G_CLK_SERDES1_LANE1_CDR>,
+		<&clks S32GEN1_CLK_SERDES0_LANE0_TX>,
+		<&clks S32GEN1_CLK_SERDES0_LANE0_CDR>,
+		<&clks S32G_CLK_SERDES0_LANE1_TX>,
+		<&clks S32G_CLK_SERDES0_LANE1_CDR>,
+		<&clks S32GEN1_CLK_SERDES_REF>;
+	assigned-clock-parents =
+		<&fxosc 0>,
+		<&firc 0>,
+		<&sirc 0>,
+		<&gmac0_ext_rx 0>,
+		<&serdes1_lane0_ext_tx 0>,
+		<&serdes1_lane0_ext_cdr 0>,
+		<&serdes1_lane1_ext_tx 0>,
+		<&serdes1_lane1_ext_cdr 0>,
+		<&serdes0_lane0_ext_tx 0>,
+		<&serdes0_lane0_ext_cdr 0>,
+		<&serdes0_lane1_ext_tx 0>,
+		<&serdes0_lane1_ext_cdr 0>;
+	assigned-clock-rates =
+		<0>, <0>, <0>, <0>,
+		<0>, <0>, <0>, <0>,
+		<0>, <0>, <0>, <0>,
+		<100000000>;
+
 	mc_cgm2: mc_cgm2@44018000 {
 		compatible = "fsl,s32gen1-mc_cgm2";
 		reg = <0x0 0x44018000 0x0 0x3000>;
-- 
2.17.1

