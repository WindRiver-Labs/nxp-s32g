From 577e76a5bf2623213115ba953c1cc02f2ac4955f Mon Sep 17 00:00:00 2001
From: Ghennadi Procopciuc <ghennadi.procopciuc@nxp.com>
Date: Mon, 31 Jan 2022 15:02:43 +0200
Subject: [PATCH 01/11] s32g: clk: Correct the rate returned by the fixed clock
 divider set_rate

Issue: ALB-8441
Upstream-Status: Pending 

Signed-off-by: Ghennadi Procopciuc <ghennadi.procopciuc@nxp.com>
Signed-off-by: Zhantao Tang <zhantao.tang@windriver.com>
---
 drivers/nxp/s32/clk/set_par_rate.c | 4 ++--
 1 file changed, 2 insertions(+), 2 deletions(-)

diff --git a/drivers/nxp/s32/clk/set_par_rate.c b/drivers/nxp/s32/clk/set_par_rate.c
index 14339b3c6..174f5bcc7 100644
--- a/drivers/nxp/s32/clk/set_par_rate.c
+++ b/drivers/nxp/s32/clk/set_par_rate.c
@@ -1,6 +1,6 @@
 // SPDX-License-Identifier: BSD-3-Clause
 /*
- * Copyright 2020-2021 NXP
+ * Copyright 2020-2022 NXP
  */
 #include <clk/s32gen1_clk_funcs.h>
 #include <clk/s32gen1_clk_modules.h>
@@ -122,7 +122,7 @@ static unsigned long set_fixed_div_freq(struct s32gen1_clk_obj *module,
 		return 0;
 	}
 
-	return set_module_rate(div->parent, rate * div->div);
+	return set_module_rate(div->parent, rate * div->div) / div->div;
 }
 
 static unsigned long set_mux_freq(struct s32gen1_clk_obj *module,
-- 
2.17.1

