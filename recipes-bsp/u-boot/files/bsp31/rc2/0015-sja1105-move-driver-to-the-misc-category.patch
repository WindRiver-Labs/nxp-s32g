From f32148eced7c37e39e679a656645ab415a95e939 Mon Sep 17 00:00:00 2001
From: "Radu Pirea (NXP OSS)" <radu-nicolae.pirea@oss.nxp.com>
Date: Thu, 23 Sep 2021 15:23:55 +0300
Subject: [PATCH 15/19] sja1105: move driver to the misc category

Move sja1105 driver to the misc category.

Issue: ALB-4601

Upstream-Status: Pending 

Signed-off-by: Radu Pirea (NXP OSS) <radu-nicolae.pirea@oss.nxp.com>
Signed-off-by: Zhantao Tang <zhantao.tang@windriver.com>
---
 drivers/misc/Kconfig                | 7 +++++++
 drivers/misc/Makefile               | 2 ++
 drivers/{spi => misc}/sja1105.c     | 0
 drivers/{spi => misc}/sja1105_cfg.c | 0
 drivers/{spi => misc}/sja1105_ll.h  | 0
 drivers/spi/Kconfig                 | 7 -------
 drivers/spi/Makefile                | 2 --
 7 files changed, 9 insertions(+), 9 deletions(-)
 rename drivers/{spi => misc}/sja1105.c (100%)
 rename drivers/{spi => misc}/sja1105_cfg.c (100%)
 rename drivers/{spi => misc}/sja1105_ll.h (100%)

diff --git a/drivers/misc/Kconfig b/drivers/misc/Kconfig
index f18aa8f7ba..13720d66c0 100644
--- a/drivers/misc/Kconfig
+++ b/drivers/misc/Kconfig
@@ -376,6 +376,13 @@ config ZYNQ_GEM_I2C_MAC_OFFSET
 	help
 	  Set the MAC offset for i2C.
 
+config SJA1105
+	bool "NXP SJA1105x driver"
+	depends on FSL_DSPI
+	help
+	  Enable the NXP SJA1105x driver.
+	  The NXP SJA1105x switch is used on several boards, such as S32V234EVB.
+
 if I2C_EEPROM
 
 config SYS_I2C_EEPROM_ADDR
diff --git a/drivers/misc/Makefile b/drivers/misc/Makefile
index d80a00cf9d..0b2439e1f1 100644
--- a/drivers/misc/Makefile
+++ b/drivers/misc/Makefile
@@ -74,3 +74,5 @@ obj-$(CONFIG_WINBOND_W83627) += winbond_w83627.o
 obj-$(CONFIG_JZ4780_EFUSE) += jz4780_efuse.o
 obj-$(CONFIG_MICROCHIP_FLEXCOM) += microchip_flexcom.o
 obj-$(CONFIG_K3_AVS0) += k3_avs.o
+obj-$(CONFIG_SJA1105) += sja1105.o
+obj-$(CONFIG_SJA1105) += sja1105_cfg.o
diff --git a/drivers/spi/sja1105.c b/drivers/misc/sja1105.c
similarity index 100%
rename from drivers/spi/sja1105.c
rename to drivers/misc/sja1105.c
diff --git a/drivers/spi/sja1105_cfg.c b/drivers/misc/sja1105_cfg.c
similarity index 100%
rename from drivers/spi/sja1105_cfg.c
rename to drivers/misc/sja1105_cfg.c
diff --git a/drivers/spi/sja1105_ll.h b/drivers/misc/sja1105_ll.h
similarity index 100%
rename from drivers/spi/sja1105_ll.h
rename to drivers/misc/sja1105_ll.h
diff --git a/drivers/spi/Kconfig b/drivers/spi/Kconfig
index d26c4c4f66..9876fa19aa 100644
--- a/drivers/spi/Kconfig
+++ b/drivers/spi/Kconfig
@@ -425,13 +425,6 @@ config SH_QSPI
 	  Enable the Renesas Quad SPI controller driver. This driver can be
 	  used on Renesas SoCs.
 
-config SJA1105
-	bool "NXP SJA1105x driver"
-	depends on FSL_DSPI
-	help
-	  Enable the NXP SJA1105x driver.
-	  The NXP SJA1105x switch is used on several boards, such as S32V234EVB.
-
 config KIRKWOOD_SPI
 	bool "Marvell Kirkwood SPI Driver"
 	help
diff --git a/drivers/spi/Makefile b/drivers/spi/Makefile
index 344f58defd..244540705a 100644
--- a/drivers/spi/Makefile
+++ b/drivers/spi/Makefile
@@ -61,8 +61,6 @@ obj-$(CONFIG_SPI_SIFIVE) += spi-sifive.o
 obj-$(CONFIG_SPI_SUNXI) += spi-sunxi.o
 obj-$(CONFIG_SH_SPI) += sh_spi.o
 obj-$(CONFIG_SH_QSPI) += sh_qspi.o
-obj-$(CONFIG_SJA1105) += sja1105.o
-obj-$(CONFIG_SJA1105) += sja1105_cfg.o
 obj-$(CONFIG_STM32_QSPI) += stm32_qspi.o
 obj-$(CONFIG_STM32_SPI) += stm32_spi.o
 obj-$(CONFIG_TEGRA114_SPI) += tegra114_spi.o
-- 
2.17.1

