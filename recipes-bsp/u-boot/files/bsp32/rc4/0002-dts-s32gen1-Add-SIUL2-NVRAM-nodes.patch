From 998daeacde577698f5968d093dbc78c82188550e Mon Sep 17 00:00:00 2001
From: Ghennadi Procopciuc <ghennadi.procopciuc@nxp.com>
Date: Thu, 13 Jan 2022 11:19:12 +0200
Subject: [PATCH 02/64] dts: s32gen1: Add SIUL2 NVRAM nodes

Issue: ALB-8339
Upstream-Status: Pending 

Signed-off-by: Ghennadi Procopciuc <ghennadi.procopciuc@nxp.com>
Signed-off-by: Zhantao Tang <zhantao.tang@windriver.com>
---
 arch/arm/dts/fsl-s32g.dtsi     | 17 +++++++++++++++--
 arch/arm/dts/fsl-s32g274a.dtsi |  6 +++++-
 arch/arm/dts/fsl-s32g3.dtsi    |  6 +++++-
 arch/arm/dts/fsl-s32r45.dts    | 16 +++++++++++++++-
 4 files changed, 40 insertions(+), 5 deletions(-)

diff --git a/arch/arm/dts/fsl-s32g.dtsi b/arch/arm/dts/fsl-s32g.dtsi
index cb3668c570..b5d48af8a9 100644
--- a/arch/arm/dts/fsl-s32g.dtsi
+++ b/arch/arm/dts/fsl-s32g.dtsi
@@ -1,6 +1,6 @@
 // SPDX-License-Identifier: GPL-2.0+
 /*
- * Copyright 2017-2021 NXP
+ * Copyright 2017-2022 NXP
  *
  * This program is free software; you can redistribute it and/or modify
  * it under the terms of the GNU General Public License as published by
@@ -199,10 +199,11 @@
 		memory-region = <&pfe_reserved>;
 	};
 
-	siul2_0@4009C000 {
+	siul2_0: siul2_0@4009C000 {
 		compatible = "simple-mfd";
 		status = "okay";
 		reg = <0x0 0x4009C000 0x0 0x2000>;
+		u-boot,dm-pre-reloc;
 
 		pinctrl0: siul2-pinctrl0 {
 			compatible = "fsl,s32-gen1-siul2-pinctrl";
@@ -221,12 +222,19 @@
 			gpio-ranges = <&pinctrl0 0 0 102>;
 			status = "okay";
 		};
+
+		siul2_0_nvram {
+			compatible = "fsl,s32-gen1-siul2_0-nvram";
+			status = "okay";
+			u-boot,dm-pre-reloc;
+		};
 	};
 
 	siul2_1@44010000 {
 		compatible = "simple-mfd";
 		status = "okay";
 		reg = <0x0 0x44010000 0x0 0x2000>;
+		u-boot,dm-pre-reloc;
 
 		pinctrl1: siul2-pinctrl1 {
 			compatible = "fsl,s32-gen1-siul2-pinctrl";
@@ -246,6 +254,11 @@
 				<&pinctrl1 11 144 47>;
 			status = "okay";
 		};
+
+		siul2_1_nvram: siul2_1_nvram {
+			status = "okay";
+			u-boot,dm-pre-reloc;
+		};
 	};
 };
 
diff --git a/arch/arm/dts/fsl-s32g274a.dtsi b/arch/arm/dts/fsl-s32g274a.dtsi
index 0318680155..58ecc03280 100644
--- a/arch/arm/dts/fsl-s32g274a.dtsi
+++ b/arch/arm/dts/fsl-s32g274a.dtsi
@@ -1,6 +1,6 @@
 // SPDX-License-Identifier: GPL-2.0+
 /*
- * Copyright 2021 NXP
+ * Copyright 2021-2022 NXP
  *
  * This program is free software; you can redistribute it and/or modify
  * it under the terms of the GNU General Public License as published by
@@ -29,3 +29,7 @@
 		reg = <0 0x34000000 0 0x800000>;
 	};
 };
+
+&siul2_1_nvram {
+	compatible = "fsl,s32g2-siul2_1-nvram";
+};
diff --git a/arch/arm/dts/fsl-s32g3.dtsi b/arch/arm/dts/fsl-s32g3.dtsi
index f8dcc67fdd..efcbf50c76 100644
--- a/arch/arm/dts/fsl-s32g3.dtsi
+++ b/arch/arm/dts/fsl-s32g3.dtsi
@@ -1,6 +1,6 @@
 // SPDX-License-Identifier: GPL-2.0+
 /*
- * Copyright 2021 NXP
+ * Copyright 2021-2022 NXP
  *
  * This program is free software; you can redistribute it and/or modify
  * it under the terms of the GNU General Public License as published by
@@ -121,3 +121,7 @@
 			<200000000>;
 	};
 };
+
+&siul2_1_nvram {
+	compatible = "fsl,s32g3-siul2_1-nvram";
+};
diff --git a/arch/arm/dts/fsl-s32r45.dts b/arch/arm/dts/fsl-s32r45.dts
index ddcf6a39a7..1d0decec6f 100644
--- a/arch/arm/dts/fsl-s32r45.dts
+++ b/arch/arm/dts/fsl-s32r45.dts
@@ -1,6 +1,6 @@
 // SPDX-License-Identifier: GPL-2.0+
 /*
- * Copyright 2017-2021 NXP
+ * Copyright 2017-2022 NXP
  *
  * This program is free software; you can redistribute it and/or modify
  * it under the terms of the GNU General Public License as published by
@@ -68,6 +68,7 @@
 		compatible = "simple-mfd";
 		status = "okay";
 		reg = <0x0 0x4009C000 0x0 0x2000>;
+		u-boot,dm-pre-reloc;
 
 		pinctrl0: siul2-pinctrl0 {
 			compatible = "fsl,s32-gen1-siul2-pinctrl";
@@ -86,12 +87,19 @@
 			gpio-ranges = <&pinctrl0 0 0 102>;
 			status = "okay";
 		};
+
+		siul2_0_nvram {
+			compatible = "fsl,s32-gen1-siul2_0-nvram";
+			status = "okay";
+			u-boot,dm-pre-reloc;
+		};
 	};
 
 	siul2_1@4403C000 {
 		compatible = "simple-mfd";
 		status = "okay";
 		reg = <0x0 0x4403C000 0x0 0x2000>;
+		u-boot,dm-pre-reloc;
 
 		pinctrl1: siul2-pinctrl1 {
 			compatible = "fsl,s32-gen1-siul2-pinctrl";
@@ -110,6 +118,12 @@
 			gpio-ranges = <&pinctrl1 0 102 32>;
 			status = "okay";
 		};
+
+		siul2_1_nvram {
+			compatible = "fsl,s32r-siul2_1-nvram";
+			status = "okay";
+			u-boot,dm-pre-reloc;
+		};
 	};
 
 	serdes1: serdes@44180000 {
-- 
2.17.1

