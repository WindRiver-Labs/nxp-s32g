From 5296463339dee64a4e8776b6316a3adb65927672 Mon Sep 17 00:00:00 2001
From: Dorin Ionita <dorin.ionita@nxp.com>
Date: Wed, 2 Feb 2022 15:43:43 +0200
Subject: [PATCH 51/64] gmac: s32: Fixed misleading help messages shown in
 s32ccgmac command.

Issue: ALB-8401
Upstream-Status: Pending 

Signed-off-by: Dorin Ionita <dorin.ionita@nxp.com>
Signed-off-by: Zhantao Tang <zhantao.tang@windriver.com>
---
 drivers/net/dwc_eth_qos_s32cc.c | 12 ++++++------
 1 file changed, 6 insertions(+), 6 deletions(-)

diff --git a/drivers/net/dwc_eth_qos_s32cc.c b/drivers/net/dwc_eth_qos_s32cc.c
index 1397769406..a15e8050f3 100644
--- a/drivers/net/dwc_eth_qos_s32cc.c
+++ b/drivers/net/dwc_eth_qos_s32cc.c
@@ -519,14 +519,14 @@ static int do_s32ccgmac_cmd(cmd_tbl_t *cmdtp, int flag,
 		       s32ccgmac_cfg_get_interface_mode_str(s32cc));
 		return 0;
 	} else if (!strcmp(argv[1 + coffs], "enable")) {
-		s32ccgmac_cfg_set_mode(dev, S32CCGMAC_MODE_ENABLE);
+		return s32ccgmac_cfg_set_mode(dev, S32CCGMAC_MODE_ENABLE);
 	} else if (!strcmp(argv[1 + coffs], "disable")) {
-		s32ccgmac_cfg_set_mode(dev, S32CCGMAC_MODE_DISABLE);
-		return 0;
+		return s32ccgmac_cfg_set_mode(dev, S32CCGMAC_MODE_DISABLE);
 	} else if (!strcmp(argv[1 + coffs], "emac")) {
-		if (argc < 3) {
+		if (argc < 3 + coffs) {
 			printf("interface: %s\n",
 				   s32ccgmac_cfg_get_interface_mode_str(s32cc));
+			return 0;
 		} else {
 			phy_interface_t new_intf;
 
@@ -545,7 +545,7 @@ static int do_s32ccgmac_cmd(cmd_tbl_t *cmdtp, int flag,
 				       argv[2 + coffs]);
 				return CMD_RET_USAGE;
 			}
-			s32ccgmac_cfg_set_interface(dev, new_intf);
+			return s32ccgmac_cfg_set_interface(dev, new_intf);
 		}
 	}
 
@@ -553,7 +553,7 @@ static int do_s32ccgmac_cmd(cmd_tbl_t *cmdtp, int flag,
 }
 
 U_BOOT_CMD(
-	   s32ccgmac, 3, 0, do_s32ccgmac_cmd,
+	   s32ccgmac, 4, 0, do_s32ccgmac_cmd,
 	   "NXP S32cc GMAC controller info",
 	   /*      */"[idx] info			  - important hw info\n"
 	   "s32ccgmac [idx] [disable|enable]  - disable/enable gmac/eqos subsystem\n"
-- 
2.17.1

