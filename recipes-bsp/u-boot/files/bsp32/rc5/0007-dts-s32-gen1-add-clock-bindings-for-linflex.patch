From 88b2fcf83d949b21d82e6cd944e079053b1cea72 Mon Sep 17 00:00:00 2001
From: "Radu Pirea (NXP OSS)" <radu-nicolae.pirea@oss.nxp.com>
Date: Wed, 9 Feb 2022 12:33:50 +0200
Subject: [PATCH 07/43] dts: s32-gen1: add clock bindings for linflex

Issue: ALB-8489

Upstream-Status: Pending 

Signed-off-by: Radu Pirea (NXP OSS) <radu-nicolae.pirea@oss.nxp.com>
Signed-off-by: Zhantao Tang <zhantao.tang@windriver.com>
---
 arch/arm/dts/fsl-s32-gen1.dtsi | 10 ++++++++++
 1 file changed, 10 insertions(+)

diff --git a/arch/arm/dts/fsl-s32-gen1.dtsi b/arch/arm/dts/fsl-s32-gen1.dtsi
index d3186f15e6..b507b9d41a 100644
--- a/arch/arm/dts/fsl-s32-gen1.dtsi
+++ b/arch/arm/dts/fsl-s32-gen1.dtsi
@@ -196,7 +196,10 @@
 	};
 
 	firmware {
+		u-boot,dm-pre-reloc;
+
 		scmi {
+			u-boot,dm-pre-reloc;
 			compatible = "arm,scmi-smc";
 			arm,smc-id = <0xc20000fe>;
 			shmem = <&scmi_shbuf>;
@@ -206,6 +209,7 @@
 			status = "okay";
 
 			clks: protocol@14 {
+				u-boot,dm-pre-reloc;
 				#address-cells = <2>;
 				#size-cells = <2>;
 
@@ -422,6 +426,8 @@
 		device_type = "serial";
 		compatible = "fsl,s32-linflexuart";
 		reg = <0x0 0x401C8000 0x0 0x3000>;
+		clocks = <&clks S32GEN1_SCMI_CLK_LINFLEX_LIN>;
+		clock-names = "lin";
 		interrupts = <0 82 1>;
 		clock-frequency = <0>;	/* updated dynamically if 0 */
 	};
@@ -430,6 +436,8 @@
 		device_type = "serial";
 		compatible = "fsl,s32-linflexuart";
 		reg = <0x0 0x401CC000 0x0 0x3000>;
+		clocks = <&clks S32GEN1_SCMI_CLK_LINFLEX_LIN>;
+		clock-names = "lin";
 		interrupts = <0 83 1>;
 		clock-frequency = <0>;	/* updated dynamically if 0 */
 	};
@@ -438,6 +446,8 @@
 		device_type = "serial";
 		compatible = "fsl,s32-linflexuart";
 		reg = <0x0 0x402BC000 0x0 0x3000>;
+		clocks = <&clks S32GEN1_SCMI_CLK_LINFLEX_LIN>;
+		clock-names = "lin";
 		interrupts = <0 84 1>;
 		clock-frequency = <0>;	/* updated dynamically if 0 */
 	};
-- 
2.17.1

