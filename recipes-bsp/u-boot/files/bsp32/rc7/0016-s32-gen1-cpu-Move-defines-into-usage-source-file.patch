From 5007d094ff8c5dea6e4216271339d6b59367a4c3 Mon Sep 17 00:00:00 2001
From: Ciprian Costea <ciprianmarian.costea@nxp.com>
Date: Mon, 21 Feb 2022 11:07:19 +0200
Subject: [PATCH 16/51] s32-gen1: cpu: Move defines into usage source file

Issue: ALB-8533
Upstream-Status: Pending 

Signed-off-by: Ciprian Costea <ciprianmarian.costea@nxp.com>
Signed-off-by: Zhantao Tang <zhantao.tang@windriver.com>
---
 arch/arm/cpu/armv8/s32/cpu.c               | 14 +++++++-
 arch/arm/cpu/armv8/s32/s32-gen1/s32g274a.c |  1 -
 arch/arm/cpu/armv8/s32/s32-gen1/soc.c      |  1 -
 arch/arm/include/asm/arch-s32/cpu.h        | 37 ----------------------
 4 files changed, 13 insertions(+), 40 deletions(-)
 delete mode 100644 arch/arm/include/asm/arch-s32/cpu.h

diff --git a/arch/arm/cpu/armv8/s32/cpu.c b/arch/arm/cpu/armv8/s32/cpu.c
index 2a20f21490..07daca55c0 100644
--- a/arch/arm/cpu/armv8/s32/cpu.c
+++ b/arch/arm/cpu/armv8/s32/cpu.c
@@ -6,9 +6,9 @@
 
 #include <common.h>
 #include <cpu_func.h>
+#include <asm/armv8/mmu.h>
 #include <asm/io.h>
 #include <asm/system.h>
-#include <asm/arch/cpu.h>
 #include <asm-generic/sections.h>
 #include "scmi_reset_agent.h"
 #include <asm/arch/soc.h>
@@ -21,6 +21,18 @@
 #define S32GEN1_DRAM_STD_ADDR	0x80000000ULL
 #define S32GEN1_DRAM_EXT_ADDR	0x800000000ULL
 
+#ifndef CONFIG_SYS_DCACHE_OFF
+#define CONFIG_SYS_FSL_PERIPH_BASE      0x40000000
+#define CONFIG_SYS_FSL_PERIPH_SIZE      0x20000000
+
+#ifdef CONFIG_PCIE_S32GEN1
+#define CONFIG_SYS_PCIE0_PHYS_ADDR_HI       0x5800000000ULL
+#define CONFIG_SYS_PCIE1_PHYS_ADDR_HI       0x4800000000ULL
+#define CONFIG_SYS_PCIE0_PHYS_SIZE_HI       0x0800000000ULL
+#define CONFIG_SYS_PCIE1_PHYS_SIZE_HI       0x0800000000ULL
+#endif
+#endif
+
 DECLARE_GLOBAL_DATA_PTR;
 
 #ifndef CONFIG_SYS_DCACHE_OFF
diff --git a/arch/arm/cpu/armv8/s32/s32-gen1/s32g274a.c b/arch/arm/cpu/armv8/s32/s32-gen1/s32g274a.c
index d4375f5088..e9b8b819ca 100644
--- a/arch/arm/cpu/armv8/s32/s32-gen1/s32g274a.c
+++ b/arch/arm/cpu/armv8/s32/s32-gen1/s32g274a.c
@@ -6,7 +6,6 @@
 #include <dm.h>
 #include <linux/sizes.h>
 #include <misc.h>
-#include <asm/arch/cpu.h>
 #include <s32gen1_siul2_nvram.h>
 
 enum s32g2_derivative {
diff --git a/arch/arm/cpu/armv8/s32/s32-gen1/soc.c b/arch/arm/cpu/armv8/s32/s32-gen1/soc.c
index f2501f9986..4c9e599451 100644
--- a/arch/arm/cpu/armv8/s32/s32-gen1/soc.c
+++ b/arch/arm/cpu/armv8/s32/s32-gen1/soc.c
@@ -10,7 +10,6 @@
 #include <div64.h>
 #include <errno.h>
 #include <hang.h>
-#include <asm/arch/cpu.h>
 #include <board_common.h>
 #ifdef CONFIG_SAF1508BET_USB_PHY
 #include <dm/device.h>
diff --git a/arch/arm/include/asm/arch-s32/cpu.h b/arch/arm/include/asm/arch-s32/cpu.h
deleted file mode 100644
index 94e61cd525..0000000000
--- a/arch/arm/include/asm/arch-s32/cpu.h
+++ /dev/null
@@ -1,37 +0,0 @@
-/* SPDX-License-Identifier: GPL-2.0+ */
-/*
- * Copyright 2014-2016 Freescale Semiconductor, Inc.
- * Copyright 2017,2019-2022 NXP
- *
- */
-#ifndef _FSL_S32_CPU_H
-#define _FSL_S32_CPU_H
-
-#include <linux/types.h>
-#include <asm/armv8/mmu.h>
-#include <config.h>
-
-#ifndef CONFIG_SYS_DCACHE_OFF
-#define TCR_EL2_PS_40BIT	(2 << 16)
-
-#define CONFIG_SYS_FSL_PERIPH_BASE      0x40000000
-
-#define CONFIG_SYS_FSL_PERIPH_SIZE      0x20000000
-
-#ifdef CONFIG_PCIE_S32GEN1
-/* TODO: These should go to defconfig, or even better,
- * be read from device tree
- */
-#define CONFIG_SYS_PCIE0_PHYS_ADDR_LO		0x53000000ULL
-#define CONFIG_SYS_PCIE1_PHYS_ADDR_LO		0x45000000ULL
-#define CONFIG_SYS_PCIE0_PHYS_SIZE_LO		0x1000000
-#define CONFIG_SYS_PCIE1_PHYS_SIZE_LO		0x1000000
-#define CONFIG_SYS_PCIE0_PHYS_ADDR_HI		0x5800000000ULL
-#define CONFIG_SYS_PCIE1_PHYS_ADDR_HI		0x4800000000ULL
-#define CONFIG_SYS_PCIE0_PHYS_SIZE_HI		0x0800000000ULL
-#define CONFIG_SYS_PCIE1_PHYS_SIZE_HI		0x0800000000ULL
-#endif
-
-#endif
-
-#endif /* _FSL_S32_CPU_H */
-- 
2.17.1

