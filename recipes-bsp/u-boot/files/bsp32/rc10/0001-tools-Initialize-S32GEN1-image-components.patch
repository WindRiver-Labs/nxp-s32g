From 0e7b50c20b3052509ab81545c887b94dc75f1fd2 Mon Sep 17 00:00:00 2001
From: Ghennadi Procopciuc <ghennadi.procopciuc@nxp.com>
Date: Fri, 11 Mar 2022 13:57:27 +0200
Subject: [PATCH 1/7] tools: Initialize S32GEN1 image components

Initialize S32GEN1 image components before using them.

Issue: ALB-8631
Upstream-Status: Pending 

Signed-off-by: Ghennadi Procopciuc <ghennadi.procopciuc@nxp.com>
Signed-off-by: Zhantao Tang <zhantao.tang@windriver.com>
---
 tools/s32gen1image.c | 4 ++++
 1 file changed, 4 insertions(+)

diff --git a/tools/s32gen1image.c b/tools/s32gen1image.c
index 8ec2bc5a0f..7c16c1a692 100644
--- a/tools/s32gen1image.c
+++ b/tools/s32gen1image.c
@@ -675,12 +675,16 @@ static void s32gen1_print_header(const void *data)
 	const uint16_t *dcd_len;
 	const struct application_boot_code *app;
 	bool qspi_boot;
+	size_t i;
 	int min_size = S32GEN1_SD_IVT_OFFSET + sizeof(struct ivt);
 	struct layout_comp ivt_comp, qspi, dcd, hse_fw,
 			   hse_img, app_hdr, app_comp;
 	struct layout_comp *comps[] = { &ivt_comp, &qspi, &dcd, &hse_fw,
 		&hse_img, &app_hdr, &app_comp };
 
+	for (i = 0; i < ARRAY_SIZE(comps); i++)
+		memset(comps[i], 0, sizeof(*comps[i]));
+
 	ivt = get_ivt_from_raw_blob(data, min_size, &qspi_boot);
 	if (!ivt)
 		return;
-- 
2.17.1

