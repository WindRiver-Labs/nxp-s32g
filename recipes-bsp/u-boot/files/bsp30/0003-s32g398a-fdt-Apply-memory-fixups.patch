From 004d93e3e7fd1be828601410e3f293efe3c998e6 Mon Sep 17 00:00:00 2001
From: Larisa Ileana Grigore <larisa.grigore@nxp.com>
Date: Wed, 26 May 2021 07:44:26 -0500
Subject: [PATCH 03/14] s32g398a: fdt: Apply memory fixups

Upstream-Status: Pending

Issue: ALB-6122
Signed-off-by: Larisa Ileana Grigore <larisa.grigore@nxp.com>
Signed-off-by: Zhantao Tang <zhantao.tang@windriver.com>
---
 arch/arm/cpu/armv8/s32/fdt.c | 6 ++++--
 1 file changed, 4 insertions(+), 2 deletions(-)

diff --git a/arch/arm/cpu/armv8/s32/fdt.c b/arch/arm/cpu/armv8/s32/fdt.c
index 0ef266a257..9e858ec07a 100644
--- a/arch/arm/cpu/armv8/s32/fdt.c
+++ b/arch/arm/cpu/armv8/s32/fdt.c
@@ -248,7 +248,8 @@ static void hide_sram(bd_t *bd)
 	}
 }
 
-#if defined(CONFIG_NXP_S32G2XX) && defined(CONFIG_PRAM)
+#if (defined(CONFIG_NXP_S32G2XX) || defined(CONFIG_NXP_S32G3XX)) && \
+	defined(CONFIG_PRAM)
 /* Fixup the DDR node in order to reserve "pram" amount of KB somewhere in the
  * available physical memory. This would typically be used by TF-A as a secure
  * memory, and enforced through XRDC. Making it "invisible" to Linux is only a
@@ -341,7 +342,8 @@ static void ft_fixup_memory(void *blob, bd_t *bd)
 {
 	hide_sram(bd);
 
-#if defined(CONFIG_NXP_S32G2XX) && defined(CONFIG_PRAM)
+#if (defined(CONFIG_NXP_S32G2XX) || defined(CONFIG_NXP_S32G3XX)) && \
+	defined(CONFIG_PRAM)
 	exclude_pram(bd);
 #endif
 	apply_ddr_limits(bd);
-- 
2.17.1

