From 66eb7900ebddd333e51abf3f0d95e908dfade087 Mon Sep 17 00:00:00 2001
From: Ciprian Marian Costea <ciprianmarian.costea@nxp.com>
Date: Fri, 25 Jun 2021 11:49:07 +0300
Subject: [PATCH 13/14] s32gen1: Fix guarding PCIE_S32GEN1 support

Upstream-Status: Pending

Issue: ALB-7374
Signed-off-by: Ciprian Marian Costea <ciprianmarian.costea@nxp.com>
Signed-off-by: Zhantao Tang <zhantao.tang@windriver.com>
---
 arch/arm/cpu/armv8/s32/fdt.c | 5 ++---
 1 file changed, 2 insertions(+), 3 deletions(-)

diff --git a/arch/arm/cpu/armv8/s32/fdt.c b/arch/arm/cpu/armv8/s32/fdt.c
index 4488f4c0c3..e4f2b0509b 100644
--- a/arch/arm/cpu/armv8/s32/fdt.c
+++ b/arch/arm/cpu/armv8/s32/fdt.c
@@ -521,7 +521,7 @@ static void ft_fixup_scmi(void *blob)
 }
 #endif
 
-#ifdef CONFIG_NXP_S32G2XX
+#ifdef CONFIG_PCIE_S32GEN1
 static int fdt_alias2node(void *blob, const char *alias_fmt, int alias_id)
 {
 	const char *alias_path;
@@ -873,7 +873,6 @@ static void ft_fixup_serdes(void *blob)
 			pr_err("Failed to set mode for SerDes%d\n", id);
 	}
 }
-
 #endif
 
 void ft_cpu_setup(void *blob, bd_t *bd)
@@ -896,7 +895,7 @@ void ft_cpu_setup(void *blob, bd_t *bd)
 #ifdef CONFIG_S32_ATF_BOOT_FLOW
 	ft_fixup_scmi(blob);
 #endif
-#ifdef CONFIG_NXP_S32G2XX
+#ifdef CONFIG_PCIE_S32GEN1
 	ft_fixup_serdes(blob);
 #endif
 }
-- 
2.17.1

